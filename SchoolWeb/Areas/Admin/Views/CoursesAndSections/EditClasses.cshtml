@model SchoolWeb.Models.ViewModels.EditClassesVM
@using SchoolWeb.Utility

@section Css {
    <link rel="stylesheet" href="~/css/CoursesAndSections/Classes.css" />
}

@{
    ViewData["Title"] = "الجدول الدراسي";
    ViewData["Active"] = "management";
}

<div class="mt-5">
    <div class="row">
        <div class="schoolLogo col-12 center">
            <img src="~/SVGs/schoolLogo.svg" width="200px" height="200px" />

        </div>
    </div>

    <div class="row flex-row-reverse">
        <div class="classesTable col-12 mt-1">

            <table align="right" class="table table-bordered mt-5">
                @*table row headers and thats are classesNumber*@
                <tr>
                    @for (int c = StaticData.Classes.Length; c >= 1; c--)
                    {
                        <th>
                            <span>@StaticFunctions.GetClassName(c)</span>
                        </th>
                    }

                    <th>
                        <span>اليوم/الحصة</span>
                    </th>
                </tr>
                @*table row data and that number of days*@
                @for (int d = 1; d <= StaticData.Days.Length; d++)
                {
                    <tr>
                        @*cells in row and that number of classes*@
                        @for (int c = StaticData.Classes.Length; c >= 1; c--)
                        {
                            var claSs = Model.Classes.FirstOrDefault
                                (cl => cl.Day == d && cl.ClassNumber == c);

                            var courseName = claSs.Course != null ? claSs.Course.Name : "";
                            var teacherName = claSs.Teacher != null ? claSs.Teacher.Name : "";

                            <td>
                                <p>@courseName</p>
                                <p>@teacherName</p>
                            </td>
                        }

                        <th>
                            <span>@StaticFunctions.GetDayName(d)</span>
                        </th>

                    </tr>
                }

            </table>
        </div>
    </div>

    <form class="mt-5" method="post">
        <div asp-validation-summary="ModelOnly" class="text-danger"></div>
        <input type="hidden" asp-for="@Model.SectionId" />
        <div class="row flex-row-reverse">

            <div class="col-6 form-group">
                <label asp-for="@Model.Days"></label>
                @Html.DropDownListFor(m => m.SelectedDay, Model.Days,
               "-اختر اليوم-", new
                    {
                        @class = "form-control",
                   style = "text-align-last:right;"
                    })

                <span asp-validation-for="@Model.Days" class="text-danger"></span>
            </div>
            <div class=" col-6 form-group">
                <label asp-for="@Model.ClassNumbers"></label>
                @Html.DropDownListFor(m => m.SelectedClassNumber, Model.ClassNumbers,
               "-اختر رقم الحصة-", new
                    {
                        @class = "form-control",
                   style = "text-align-last:right;"
                    })

                <span asp-validation-for="@Model.ClassNumbers" class="text-danger"></span>
            </div>
            
        </div>

        <div class="row flex-row-reverse mt-3">


            <div class="col-6 form-group">
                <label asp-for="@Model.Courses"></label>
                @Html.DropDownListFor(m => m.SelectedCourse, Model.Courses,
               "-اختر المادة-", new
                    {
                        @class = "form-control",
                   style = "text-align-last:right;"
                    })

                <span asp-validation-for="@Model.Courses" class="text-danger"></span>
            </div>

            <div class="col-6 form-group">
                <label asp-for="@Model.Teachers"></label>
                @Html.DropDownListFor(m => m.SelectedTeacher, Model.Teachers,
               "-اختر المعلم-", new
                    {
                        @class = "form-control",
                   style = "text-align-last:right;"
                    })

                <span asp-validation-for="@Model.Teachers" class="text-danger"></span>
            </div>

        </div>


        <div class="mt-5 mb-4">
            <button class="btn" style="background-color: #038242;width:160px;height:60px;" type="submit">
                <span style="color:#fdfdfd; font-size:1.1rem;">حفظ</span>
            </button>
        </div>

        <div class="mt-5 mb-4">
            <a asp-action="Sections" class="btn d-inline-flex justify-content-center align-items-center"
               style="background-color: #f3f3f3;width:160px;height:60px;border:1px solid #038242;">
                <span style="color:#038242; font-size:1.1rem;">العودة الى الشعب</span>
            </a>
        </div>

    </form>

</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}




