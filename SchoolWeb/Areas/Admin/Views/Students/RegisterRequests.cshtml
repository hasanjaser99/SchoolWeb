@model SchoolWeb.Models.ViewModels.RegisterRequestsVM
@using SchoolWeb.Utility

@section Css {
    <link rel="stylesheet" href="~/css/AdminStudents/AdminStudentsNav.css" />
    <link rel="stylesheet" href="~/css/AdminStudents/RegisterRequests.css" />
    @*.registerFormContainer input {
        text-align: right !important;
        }*@
}

@{
    ViewData["Title"] = "بيانات الطلاب";
    ViewData["Active"] = "management";
    string activeNav = "registerRequests";
}


<div class="mt-5">
    <div class="row pb-3">
        <div class="col-lg-6 col-md-6">
            <partial name="~/Areas/Public/Views/Partials/Navs/_StudentsAdminNav.cshtml" model="activeNav" />
        </div>
        <div class="schoolLogo col-lg-6 col-md-6">
            <img src="~/SVGs/schoolLogo.svg" width="200px" height="200px" />

        </div>
    </div>

    <div class="row flex-row-reverse mt-5">
        <div class="studentsTable col-12 mt-1">

            <div id="table">
                <table id="tblData" align="right" class="table table-bordered mt-5">
                    <tr>
                        <th></th>
                        <th>
                            <span>عرض المزيد</span>
                        </th>
                        <th>
                            <span>العنوان</span>
                        </th>
                        <th>
                            <span>رقم هاتف ولي الأمر</span>
                        </th>
                        <th>
                            <span>الصف</span>
                        </th>
                        <th>
                            <span>الإسم باللغة الإنجليزية</span>
                        </th>
                        <th>
                            <span>الإسم باللغة العربية</span>
                        </th>
                    </tr>
                    @foreach (var student in Model.Students)
                    {
                        <tr id="@student.Id">
                            <td>
                                <span class="tableActionButtons">
                                    <a class="deleteButton btn p-sm-0" onclick="DeleteStudent(`@student.Id`)">
                                        <p class="text-white font-weight-bold mt-1">رفض</p>
                                    </a>

                                    <a class="acceptStudent editButton btn p-sm-0"
                                       data-backdrop="static"
                                       data-keyboard="false"
                                       data-toggle="modal"
                                       href="#acceptStudentModal"
                                       onclick="showAcceptStudentModal(`@student.Id`)">
                                        <p class="green-font font-weight-bold mt-1">قبول</p>
                                    </a>
                                </span>
                            </td>
                            <td>
                                <span class="tableActionButtons">
                                    <a class="editButton btn p-sm-0"
                                       asp-action="StudentDetails" asp-route-id="@student.Id">
                                        <p class="green-font font-weight-bold mt-1">المزيد</p>
                                    </a>
                                </span>
                            </td>

                            <td>@student.Address</td>

                            <td>@student.ParentPhoneNumber</td>

                            <td>@StaticFunctions.GetGrade(student.Grade)</td>

                            <td>@student.EnglishName</td>

                            <td>@student.ArabicName</td>


                        </tr>


                    }
                </table>
            </div>
        </div>
    </div>
</div>


<!---------------------------------------- Modal ---------------------------------------->

<div class="modal fade" id="acceptStudentModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document" id="modalContentContainer">
        <div class="modal-content align-items-center">


            <img src="~/SVGs/schoolLogo.svg" class="mt-2" height="150" width="150" />

            <!--------------------------------- Form --------------------------------------->

            <form class="acceptForm mt-5 w-75 mb-4" asp-action="AcceptStudent">
                <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                <input type="hidden" asp-for="StudentId" id="studentId" />
                <input type="hidden" asp-for="SelectedGrade" id="grade" />
                <input type="hidden" asp-for="SelectedSection" id="sectionId" />

                <div class="form-group">
                    <label>المستوى الدراسي</label>
                    <div id="gradesDiv">
                        <partial name="~/Areas/Public/Views/Partials/AdminStudents/_GradesDropDownList.cshtml" ,
                                 model="@null" />
                    </div>
                    <span asp-validation-for="@Model.SelectedGrade" class="text-danger"></span>
                </div>

                <div class="form-group">
                    <label>الشعبة</label>
                    <div id="sectionsDiv">
                        <partial name="~/Areas/Public/Views/Partials/AdminStudents/_SectionsDropDownList.cshtml" ,
                                 model="@null" />
                    </div>
                    <span asp-validation-for="@Model.SelectedSection" class="text-danger"></span>
                </div>

                <div class="form-group">
                    <label asp-for="@Model.BusFees"></label>
                    <input asp-for="@Model.BusFees" class="form-control" min="0" max="1000" id="BussFees" />
                    <span asp-validation-for="@Model.BusFees" class="text-danger"></span>
                </div>

                <div class="form-group">
                    <label asp-for="@Model.Discount"></label>
                    <div class="row flex-row-reverse">
                        <div class="col-11">
                            <input asp-for="@Model.Discount" class="form-control" min="0" max="100" id="Discount" />
                        </div>
                        <div class="col-1">
                            <span> % </span>
                        </div>
                    </div>
                </div>

                <!--------------------------------- Actions --------------------------------------->
                <div class=" w-100 justify-content-between mt-4 "
                     style="display:flex">
                    <button type="button"
                            class="btn btn-secondary"
                            data-dismiss="modal"
                            style="background-color: #f3f3f3;
                                border: 2px solid #038242;
                                color: #038242;width:120px;
                                height: 60px;">
                        إلغاء
                    </button>

                    <button id="acceptDoneButton"
                            type="submit"
                            onclick="ShowLoading()"
                            class="btn text-white"
                            style="background-color: #038242;width:120px;height:60px;">
                        تم
                    </button>
                </div>

            </form>
        </div>
    </div>
</div>

@section Scripts {
    <script src="~/js/admin-studentRequests.js"></script>
    <partial name="_ValidationScriptsPartial.cshtml" />
}



